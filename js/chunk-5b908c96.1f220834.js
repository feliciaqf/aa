(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b908c96"],{"0960":function(e,t,a){},"3ca3":function(e,t,a){"use strict";var n=a("6547").charAt,r=a("69f3"),s=a("7dd0"),i="String Iterator",c=r.set,o=r.getterFor(i);s(String,"String",(function(e){c(this,{type:i,string:String(e),index:0})}),(function(){var e,t=o(this),a=t.string,r=t.index;return r>=a.length?{value:void 0,done:!0}:(e=n(a,r),t.index+=e.length,{value:e,done:!1})}))},4141:function(e,t,a){},"63ea":function(e,t,a){"use strict";var n=a("6aa5"),r=a.n(n);r.a},"6aa5":function(e,t,a){},"6d830":function(e,t,a){var n={"./ABC.png":"85d0","./BCCB.png":"17d6","./BOC.png":"fb3f","./BOCOM.png":"89e2","./BOS.png":"0d98","./CCB.png":"02ae","./CEB.png":"1167","./CGB.png":"31a0","./CIB.png":"7f52","./CMB.png":"6fe6","./CMBC.png":"ad20","./Default.png":"b9e4","./ECITIC.png":"49df","./HXB.png":"35ee","./HZCBC.png":"edc5","./ICBC.png":"ebab","./NBCBC.png":"0e2a","./PAB.png":"f9e0","./PSBC.png":"5280","./SPDB.png":"269c","./bg-bank-card.png":"118e"};function r(e){var t=s(e);return a(t)}function s(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=s,e.exports=r,r.id="6d830"},"763f":function(e,t,a){},"76d3":function(e,t,a){"use strict";var n=a("4141"),r=a.n(n);r.a},"99aa":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"multiple-section"},[a("div",{staticClass:"main-top"},[a("h2",[e._v(e._s(e.$t(e.$route.meta.title)))])]),a("div",{staticClass:"section"},[a("div",{staticClass:"main-body"},[a("h2",[e._v(" "+e._s(e.$t("message.boundBankCard"))+" "),a("small",[e._v(e._s("("+e.myBankcards.length+"/"+e.max+")"))])]),a("BankcardList",{attrs:{lists:e.myBankcards,type:"card"},on:{add:e.bankcardAdd}})],1)])])},r=[],s=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("159b"),a("2fa7")),i=a("2f62"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"list-cells"},[e._l(e.lists,(function(t,n){return a("div",{key:n,staticClass:"cell",class:[e.type,e.bankcard&&e.bankcard.id===t.id?"selected":""],on:{click:function(a){return e.onSelect(t)}}},[e.type&&"card"===e.type?[a("div",{staticClass:"cell-head"},[a("BankIcon",{attrs:{"bank-code":t.icon_code}}),e._v(" "+e._s(t.bank_name)+" ")],1),a("div",{staticClass:"cell-body"},[e._v(" "+e._s("**** **** **** "+t.card_no.slice(-4))+" ")]),a("div",{staticClass:"cell-foot"},[e._v(" "+e._s("**"+t.name.slice(-1))+" ")])]:[a("div",{staticClass:"cell-head"},[a("BankIcon",{attrs:{"bank-code":t.icon_code}})],1),a("div",{staticClass:"cell-body"},[e._v(" "+e._s(t.bank_name)+" ")]),a("div",{staticClass:"cell-foot"},[e._v(" "+e._s(e.$t("尾号 "))+e._s(t.card_no&&t.card_no.slice(-4))+" ")])]],2)})),e.showAddBtn?a("div",{staticClass:"cell add",class:[e.type],on:{click:e.addBankcard}},[a("layout",{staticClass:"cell-body",attrs:{"justify-center":"","align-center":""}},[a("i",{staticClass:"el-icon-plus"}),a("span",[e._v(e._s(e.$t("添加银行卡")))])])],1):e._e()],2),a("BankcardAdd")],1)},o=[],l=a("b2f1"),d=a("f6ee");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var b={name:"BankcardList",components:{BankIcon:l["a"],BankcardAdd:d["a"]},props:["bankcard","lists","type","addBtnHidden"],data:function(){return{max:4}},computed:{showAddBtn:function(){return!this.addBtnHidden&&this.lists.length<this.max}},methods:m({},Object(i["b"])("global",["setBankcardAddVisible"]),{onSelect:function(e){this.$emit("onSelect",e)},addBankcard:function(){this.$emit("add")}})},f=b,p=(a("76d3"),a("2877")),h=Object(p["a"])(f,c,o,!1,null,"7d9d4d47",null),g=h.exports,k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-dialog"},[a("el-dialog",{attrs:{visible:e.visible,"before-close":e.handleClose,width:"600px",title:e.$t("message.bindNewCard"),"custom-class":"add-bankcard"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:e.form,rules:e.rules,"hide-required-asterisk":""}},[a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.cardholderName"),prop:"name"}},[a("el-input",{attrs:{maxlength:"30",disabled:e.userInfo.realname&&void 0!==e.userInfo.realname,placeholder:e.$t("message.inputCardholderNameDesc")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.bankAccount"),prop:"card"}},[a("el-input",{attrs:{maxlength:"20",placeholder:e.$t("message.plaseInputBankAccount")},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.chooseBank"),prop:"bank"}},[a("el-select",{attrs:{placeholder:e.$t("message.chooseBank")},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}},e._l(e.bankList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}},[a("BankItem",{class:{selected:e.form.bank===t.id},attrs:{bank:t}})],1)})),1)],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.bankBranch"),prop:"bankBranch"}},[a("layout",{staticClass:"multiple",attrs:{"justify-space-between":""}},[a("el-select",{staticClass:"province",attrs:{placeholder:e.$t("message.chooseProvince")},model:{value:e.form.bankBranch.province,callback:function(t){e.$set(e.form.bankBranch,"province",t)},expression:"form.bankBranch.province"}},e._l(e.provinceList,(function(e){return a("el-option",{key:e.code,attrs:{value:e.name,label:e.name}})})),1),a("el-select",{staticClass:"city",attrs:{placeholder:e.$t("message.chooseCity")},model:{value:e.form.bankBranch.city,callback:function(t){e.$set(e.form.bankBranch,"city",t)},expression:"form.bankBranch.city"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.code,attrs:{value:e.name,label:e.name}})})),1)],1),a("layout",[a("el-input",{staticClass:"name",attrs:{maxlength:"100",placeholder:e.$t("message.bankBranchPlaceholder")},model:{value:e.form.bankBranch.name,callback:function(t){e.$set(e.form.bankBranch,"name","string"===typeof t?t.trim():t)},expression:"form.bankBranch.name"}})],1)],1),a("el-form-item",{staticClass:"buttons"},[a("el-button",{staticClass:"submit",attrs:{loading:e.submitLoading,type:"primary"},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("message.confirmSubmit"))+" ")])],1),a("div",{staticClass:"form-text"},[a("p",[e._v(e._s(e.$t("温馨提示：您最多可绑定4张银行卡，如需修改绑定信息请联系在线客服")))])])],1)],1)],1)},v=[],y=(a("7db0"),a("b0c0"),a("d3b7"),a("3ca3"),a("ddb0"),a("96cf"),a("93dd")),B=a("9d0e");function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function C(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $={name:"BankcardAdd",components:{BankItem:B["a"]},data:function(){var e=this;return{visible:!1,bankList:[],provinceList:[],form:{name:"",card:"",bank:"",bankBranch:{province:"",city:"",name:""}},submitLoading:!1,rules:{card:[{required:!0,message:this.$t("message.plaseInputBankAccount"),trigger:"blur"},{trigger:"blur",type:"number",validator:function(t,a,n){var r=/^(\d{16,19})$/g;r.test(a)||(console.log("hello"),n(new Error(e.$t("银行卡号格式不正确！")))),n()}}],bankBranch:[{type:"object",fields:{province:{required:!0,message:this.$t("message.chooseProvince")},city:{required:!0,message:this.$t("message.chooseCity")},name:{required:!0,message:this.$t("message.bankBranchPlaceholder"),trigger:"blur change"}}}],bank:[{required:!0,type:"number",message:this.$t("message.chooseBank"),trigger:"blur"}]}}},computed:C({},Object(i["e"])("user",["userInfo"]),{},Object(i["e"])("global",["bankcardAddVisible"]),{cityList:function(){var e=this,t=this.provinceList.find((function(t){return t.name===e.form.bankBranch.province}));return t&&1===t.city.length?t.city[0].area:t?t.city:[]}}),watch:{bankcardAddVisible:function(e){console.log("bankcardAddVisible",e),this.visible=e}},created:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.userInfo),this.visible=this.bankcardAddVisible,this.form.name=this.userInfo.realname||"",this.userInfo.realname||(this.rules.realname=[{required:!0,message:this.$t("message.inputCardholderNameDesc"),trigger:"blur"},{trigger:"blur",validator:function(t,a,n){var r=/^([\u4e00-\u9fa5]{2,12})$/g;r.test(a)||n(new Error(e.$t("请输入正确的姓名！"))),n()}}]),t.next=6,regeneratorRuntime.awrap(Promise.all([this.loadCityList(),this.getAllBankList()]));case 6:case"end":return t.stop()}}),null,this)},methods:C({},Object(i["b"])("user",["getUserInfo"]),{},Object(i["b"])("global",["setBankcardAddVisible"]),{getAllBankList:function(){var e=this;Object(y["b"])().then((function(t){e.bankList=t}))},loadCityList:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(a("a0da"));case 2:e=t.sent,this.provinceList=e;case 4:case"end":return t.stop()}}),null,this)},onSubmit:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e=this.userInfo.realname||this.form.name,a.next=4,regeneratorRuntime.awrap(this.$refs.form.validate());case 4:this.submitLoading=!0,Object(y["a"])({bank_id:this.form.bank,card_no:this.form.card,name:e,bank_of_deposit:this.form.bankBranch.province+"-"+this.form.bankBranch.city+"-"+this.form.bankBranch.name}).then((function(e){t.$refs.form.resetFields(),t.bankBranch={city:"",province:"",name:""},t.submitLoading=!1,t.$message({message:t.$t("message.addSuccess"),type:"success"}),t.$store.dispatch("user/getUserInfo",!0),t.setBankcardAddVisible(!1)})).catch((function(){t.submitLoading=!1})),a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](0);case 10:case"end":return a.stop()}}),null,this,[[0,8]])},handleClose:function(e){this.setBankcardAddVisible(!1),e&&"function"===typeof e&&e()}})},w=$,j=(a("edef"),Object(p["a"])(w,k,v,!1,null,"cf65efc6",null)),_=j.exports;function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function P(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var L={name:"Bankcard",components:{BankcardList:g,bankCardAdd:_},data:function(){return{loading:!1,max:4}},computed:P({},Object(i["e"])("user",["userInfo"]),{myBankcards:function(){return this.userInfo.user_bank||[]}}),created:function(){},methods:P({},Object(i["b"])("global",["setBankcardAddVisible"]),{bankcardAdd:function(){this.setBankcardAddVisible(!0)}})},A=L,I=(a("e2da"),Object(p["a"])(A,n,r,!1,null,"09eeb35a",null));t["default"]=I.exports},e2da:function(e,t,a){"use strict";var n=a("763f"),r=a.n(n);r.a},edef:function(e,t,a){"use strict";var n=a("0960"),r=a.n(n);r.a},f6ee:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"agent-dialog"},[a("el-dialog",{attrs:{visible:e.visible,"before-close":e.handleClose,width:"600px",title:e.$t("message.bindNewCard"),"custom-class":"add-bankcard"},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":"top",model:e.form,rules:e.rules,"hide-required-asterisk":""}},[a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.cardholderName"),prop:"name"}},[a("el-input",{attrs:{maxlength:"30",disabled:e.userInfo.realname&&void 0!==e.userInfo.realname,placeholder:e.$t("message.inputCardholderNameDesc")},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.bankAccount"),prop:"card"}},[a("el-input",{attrs:{maxlength:"20",placeholder:e.$t("message.plaseInputBankAccount")},model:{value:e.form.card,callback:function(t){e.$set(e.form,"card",t)},expression:"form.card"}})],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.chooseBank"),prop:"bank"}},[a("el-select",{attrs:{placeholder:e.$t("message.chooseBank")},model:{value:e.form.bank,callback:function(t){e.$set(e.form,"bank",t)},expression:"form.bank"}},e._l(e.bankList,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:t.disabled}},[a("BankItem",{class:{selected:e.form.bank===t.id},attrs:{bank:t}})],1)})),1)],1),a("el-form-item",{staticClass:"max-width",attrs:{label:e.$t("message.bankBranch"),prop:"bankBranch"}},[a("layout",{staticClass:"multiple",attrs:{"justify-space-between":""}},[a("el-select",{staticClass:"province",attrs:{placeholder:e.$t("message.chooseProvince")},model:{value:e.form.bankBranch.province,callback:function(t){e.$set(e.form.bankBranch,"province",t)},expression:"form.bankBranch.province"}},e._l(e.provinceList,(function(e){return a("el-option",{key:e.code,attrs:{value:e.name,label:e.name}})})),1),a("el-select",{staticClass:"city",attrs:{placeholder:e.$t("message.chooseCity")},model:{value:e.form.bankBranch.city,callback:function(t){e.$set(e.form.bankBranch,"city",t)},expression:"form.bankBranch.city"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.code,attrs:{value:e.name,label:e.name}})})),1)],1),a("layout",[a("el-input",{staticClass:"name",attrs:{maxlength:"100",placeholder:e.$t("message.bankBranchPlaceholder")},model:{value:e.form.bankBranch.name,callback:function(t){e.$set(e.form.bankBranch,"name","string"===typeof t?t.trim():t)},expression:"form.bankBranch.name"}})],1)],1),a("el-form-item",{staticClass:"buttons"},[a("el-button",{staticClass:"submit",attrs:{loading:e.submitLoading,type:"primary"},on:{click:e.onSubmit}},[e._v(" "+e._s(e.$t("message.confirmSubmit"))+" ")])],1),a("div",{staticClass:"form-text"},[a("p",[e._v(e._s(e.$t("温馨提示：您最多可绑定4张银行卡，如需修改绑定信息请联系在线客服")))])])],1)],1)],1)},r=[],s=(a("a4d3"),a("4de4"),a("7db0"),a("4160"),a("b0c0"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("96cf"),a("2fa7")),i=a("2f62"),c=a("93dd"),o=a("9d0e");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={name:"BankcardAdd",components:{BankItem:o["a"]},data:function(){var e=this;return{visible:!1,bankList:[],provinceList:[],form:{name:"",card:"",bank:"",bankBranch:{province:"",city:"",name:""}},submitLoading:!1,rules:{card:[{required:!0,message:this.$t("message.plaseInputBankAccount"),trigger:"blur"},{trigger:"blur",type:"number",validator:function(t,a,n){var r=/^(\d{16,19})$/g;r.test(a)||(console.log("hello"),n(new Error(e.$t("银行卡号格式不正确！")))),n()}}],bankBranch:[{type:"object",fields:{province:{required:!0,message:this.$t("message.chooseProvince")},city:{required:!0,message:this.$t("message.chooseCity")},name:{required:!0,message:this.$t("message.bankBranchPlaceholder"),trigger:"blur change"}}}],bank:[{required:!0,type:"number",message:this.$t("message.chooseBank"),trigger:"blur"}]}}},computed:d({},Object(i["e"])("user",["userInfo"]),{},Object(i["e"])("global",["bankcardAddVisible"]),{cityList:function(){var e=this,t=this.provinceList.find((function(t){return t.name===e.form.bankBranch.province}));return t&&1===t.city.length?t.city[0].area:t?t.city:[]}}),watch:{bankcardAddVisible:function(e){console.log("bankcardAddVisible",e),this.visible=e,this.form.name=this.userInfo.realname||""}},created:function(){var e=this;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(this.userInfo),this.visible=this.bankcardAddVisible,this.form.name=this.userInfo.realname,this.userInfo.realname||(this.rules.realname=[{required:!0,message:this.$t("message.inputCardholderNameDesc"),trigger:"blur"},{trigger:"blur",validator:function(t,a,n){var r=/^([\u4e00-\u9fa5]{2,12})$/g;r.test(a)||n(new Error(e.$t("请输入正确的姓名！"))),n()}}]),t.next=6,regeneratorRuntime.awrap(Promise.all([this.loadCityList(),this.getAllBankList()]));case 6:case"end":return t.stop()}}),null,this)},methods:d({},Object(i["b"])("user",["getUserInfo"]),{},Object(i["b"])("agent",["getUserInfo"]),{},Object(i["b"])("global",["setBankcardAddVisible"]),{getAllBankList:function(){var e=this;Object(c["b"])().then((function(t){e.bankList=t}))},loadCityList:function(){var e;return regeneratorRuntime.async((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,regeneratorRuntime.awrap(a("a0da"));case 2:e=t.sent,this.provinceList=e;case 4:case"end":return t.stop()}}),null,this)},onSubmit:function(){var e,t=this;return regeneratorRuntime.async((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e=this.userInfo.realname||this.form.name,a.next=4,regeneratorRuntime.awrap(this.$refs.form.validate());case 4:this.submitLoading=!0,Object(c["a"])({bank_id:this.form.bank,card_no:this.form.card,name:e,bank_of_deposit:this.form.bankBranch.province+"-"+this.form.bankBranch.city+"-"+this.form.bankBranch.name}).then((function(e){t.$refs.form.resetFields(),t.bankBranch={city:"",province:"",name:""},t.submitLoading=!1,t.$message({message:t.$t("message.addSuccess"),type:"success"}),t.$store.dispatch("user/getUserInfo",!0),t.setBankcardAddVisible(!1)})).catch((function(){t.submitLoading=!1})),a.next=10;break;case 8:a.prev=8,a.t0=a["catch"](0);case 10:case"end":return a.stop()}}),null,this,[[0,8]])},handleClose:function(e){this.setBankcardAddVisible(!1),e&&"function"===typeof e&&e()}})},m=u,b=(a("63ea"),a("2877")),f=Object(b["a"])(m,n,r,!1,null,"0d620efc",null);t["a"]=f.exports}}]);